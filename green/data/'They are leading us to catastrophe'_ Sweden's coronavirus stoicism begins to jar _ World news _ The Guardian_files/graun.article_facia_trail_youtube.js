(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return d});var i=n(6),r=n(0),a=n(24),o=n.n(a),c=n(55),u=function(t,e){return"".concat(t,":").concat(e)},d=function(t){var e=r.a.get("googleAnalytics.trackers.editorial"),n={play:"metric1",skip:"metric2",25:"metric3",50:"metric4",75:"metric5",end:"metric6"},a=function(t){var e={video:{id:"gu-video-youtube-".concat(t.mediaId),eventType:"video:content:".concat(t.eventType)}};o.a.record(e)};["play","25","50","75","end"].forEach(function(r){i.a.once(u(r,t),function(i){var o={mediaId:t,mediaType:"video",eventType:r,isPreroll:!1};a(o),window.ga("".concat(e,".send"),"event",Object(c.a)(o,n,i,"gu-video-youtube",function(){return"video content"},t))})}),a({mediaId:t,mediaType:"video",eventType:"ready",isPreroll:!1})},s=function(t,e){i.a.emit(u(t,e),e)}},132:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(15),r=n.n(i),a=n(2),o=n.n(a),c=n(0),u=n(12),d=n(26),s=n(21),f=n(85),l=new function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a;r()(this,t),o()(this,"dfpAdvertising",void 0),o()(this,"shouldBlockAnalytics",void 0),o()(this,"stickyTopBannerAd",void 0),o()(this,"articleBodyAdverts",void 0),o()(this,"articleAsideAdverts",void 0),o()(this,"carrotTrafficDriver",void 0),o()(this,"highMerch",void 0),o()(this,"thirdPartyTags",void 0),o()(this,"outbrain",void 0),o()(this,"commentAdverts",void 0),o()(this,"liveblogAdverts",void 0),o()(this,"paidforBand",void 0),o()(this,"asynchronous",void 0),o()(this,"adFree",void 0),o()(this,"comscore",void 0);var n=/[#&]noads(&.*)?$/.test(window.location.hash),i=/[#&]noadsaf(&.*)?$/.test(window.location.hash),a=/[?&]forceads(&.*)?$/.test(window.location.search),l=!n&&!f.a.isOff("adverts"),g=e.get("page.shouldHideAdverts")||"childrens-books-site"===e.get("page.section"),m=e.get("page.isMinuteArticle"),v="Article"===e.get("page.contentType"),p="Interactive"===e.get("page.contentType"),b=e.get("page.isLiveBlog"),h=e.get("page.isHosted"),y="Identity"===e.get("page.contentType")||"identity"===e.get("page.section"),w=e.get("switches"),O="wide"===Object(u.d)(),j=document.documentElement&&document.documentElement.classList.contains("has-sticky"),A=e.get("page.showNewRecipeDesign")&&e.get("tests.abNewRecipeDesign"),T=["help/ng-interactive/2017/mar/17/contact-the-guardian-securely","help/2016/sep/19/how-to-contact-the-guardian-securely"].includes(e.get("page.pageId",""));this.adFree=!!i||Object(d.g)(),this.dfpAdvertising=a||w.commercial&&l&&!g&&!y&&!this.adFree,this.shouldBlockAnalytics=T,this.stickyTopBannerAd=!this.adFree&&!e.get("page.disableStickyTopBanner")&&!j,this.articleBodyAdverts=this.dfpAdvertising&&!this.adFree&&!m&&v&&!b&&!h&&!A,this.carrotTrafficDriver=!this.adFree&&this.articleBodyAdverts&&e.get("switches.carrotTrafficDriver",!1)&&!e.get("page.isPaidContent"),this.highMerch=this.dfpAdvertising&&!this.adFree&&!m&&!h&&!p&&!e.get("page.isFront")&&!A,this.thirdPartyTags=!this.adFree&&l&&!y&&!T,this.outbrain=this.dfpAdvertising&&!this.adFree&&w.outbrain&&!n&&!g&&v&&!e.get("page.isPreview")&&e.get("page.showRelatedContent")&&!(Object(s.l)()&&e.get("page.commentable")),this.commentAdverts=this.dfpAdvertising&&!this.adFree&&!m&&e.get("switches.enableDiscussionSwitch")&&e.get("page.commentable")&&(!b||O),this.liveblogAdverts=b&&this.dfpAdvertising&&!this.adFree,this.paidforBand=e.get("page.isPaidContent")&&!j,this.comscore=e.get("switches.comscore",!1)&&!y&&!T}},172:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o});var i=n(4),r=function(t){try{return JSON.parse(i.a.getRaw(t)||"[]").slice(0,250).map(function(t){return Number.parseInt(t,10)}).filter(function(t){return"number"==typeof t&&!Number.isNaN(t)}).map(String)}catch(t){return[]}},a=function(){return r("_papns")},o=function(){return r("_pdfps")}},213:function(t,e,n){"use strict";n.d(e,"o",function(){return p}),n.d(e,"B",function(){return b}),n.d(e,"m",function(){return h}),n.d(e,"n",function(){return y}),n.d(e,"k",function(){return w}),n.d(e,"l",function(){return O}),n.d(e,"f",function(){return j}),n.d(e,"b",function(){return A}),n.d(e,"c",function(){return T}),n.d(e,"a",function(){return k}),n.d(e,"g",function(){return E}),n.d(e,"e",function(){return P}),n.d(e,"d",function(){return S}),n.d(e,"j",function(){return C}),n.d(e,"i",function(){return I}),n.d(e,"w",function(){return L}),n.d(e,"u",function(){return _}),n.d(e,"y",function(){return D}),n.d(e,"v",function(){return F}),n.d(e,"x",function(){return B}),n.d(e,"p",function(){return R}),n.d(e,"A",function(){return M}),n.d(e,"q",function(){return N}),n.d(e,"z",function(){return U}),n.d(e,"r",function(){return x}),n.d(e,"s",function(){return V}),n.d(e,"C",function(){return Y}),n.d(e,"D",function(){return q}),n.d(e,"h",function(){return H}),n.d(e,"t",function(){return G});var i=n(46),r=n.n(i),a=n(12),o=n(3),c=n(0),u=n(133),d=n(97),s=n(98),f={},l=function(t,e){var n=f[e]||(f[e]=new RegExp("".concat(e,"$")));return t.replace(n,"")},g={},m=r()(function(){return Object(o.g)()}),v=function(t,e){return Boolean(t.find(function(t){return t[0]===e[0]&&t[1]===e[1]}))},p=function(t){return Object.keys(t).reduce(function(e,n){return t[n]&&(e[n]=t[n]),e},{})},b=function(t){return function(t,e){var n=g[e]||(g[e]=new RegExp("^".concat(e)));return t.replace(n,"")}(t,"dfp-ad--")},h=function(){return"GB"===m()},y=function(){return["US","CA"].includes(m())},w=function(){return["AU","NZ"].includes(m())},O=function(){return!h()&&!y()&&!w()},j=function(t){return v(t,[300,250])},A=function(t){return v(t,[300,600])},T=function(t){return v(t,[728,90])},k=function(t){return v(t,[970,250])},E=function(t){return j(t)||A(t)},P=function(t){return v(t,[320,50])},S=function(t){return T(t)||k(t)},C=function(t){return t.length>0?t.reduce(function(t,e){return t[0]>=e[0]&&t[1]>=e[1]?t:e}):null},I=function(){switch(Object(a.d)()){case"mobile":case"mobileMedium":case"mobileLandscape":return"M";case"phablet":case"tablet":return"T";case"desktop":case"leftCol":case"wide":return"D";default:return"M"}},L=function(){return y()},_=function(){return!y()},D=function(){return y()},F=function(){return Object(u.f)(s.a,"variant")},B=function(){return y()},R=function(t){return j(t)},M=function(){return!y()&&!w()&&c.a.get("switches.prebidOzone")},N=function(){return Object(u.f)(d.a,"variant")||!y()},U=function(){return h()&&(c.a.get("page.isDev",!0)||1===(1,10,t=Math.ceil(1),e=Math.floor(10),Math.floor(Math.random()*(e-t+1))+t));var t,e},x=function(){return h()||O()},V=r()(function(){return-1!==window.location.hash.indexOf("#mobile-sticky")||c.a.get("switches.mobileStickyLeaderboard")&&Object(a.m)({min:"mobile",max:"mobileLandscape"})&&(y()||w())&&"Article"===c.a.get("page.contentType")&&!c.a.get("page.isHosted")}),Y=function(t){return l(l(t,"--mobile"),"Mobile")},q=function(t){return l(t,"([2-9]|\\d{2,})")},H=function(t){return v(t,[160,600])},G=-1!==window.location.hash.indexOf("#only-a9")},214:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a});var i=n(85),r=function(t){Object.keys(t).forEach(function(e){i.a.set("".concat("accessibility",".").concat(e),t[e])})},a=function(t){return!0===function(t){return!1!==i.a.get("".concat("accessibility",".").concat(t))}(t)}},215:function(t,e,n){"use strict";n.d(e,"c",function(){return I}),n.d(e,"a",function(){return C}),n.d(e,"b",function(){return S});var i,r=n(28),a=n.n(r),o=n(0),c=n(1),u=n(12),d=n(3),s=n(4),f=n(19),l=n(172),g=n(21),m=n(236),v=n(163),p=n(132),b=n(133),h=n(213),y=n(135),w=n.n(y),O=n(46),j=n.n(O),A=n(220),T=n.n(A),k=n(238),E=n.n(k),P={},S=j()(function(t){return Object(h.o)({sens:t.sens,pt1:t.url,pt2:t.edition,pt3:t.ct,pt4:t.p,pt5:t.k,pt6:t.su,pt7:t.bp,pt8:t.x,pt9:[t.gdncrm,t.pv,t.co,t.tn,t.slot].join("|"),permutive:t.permutive})}),C=j()(function(t){return e=S(t),w()(Object.keys(e).filter(function(t){return""!==e[t]&&null!==e[t]}).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(t,"=").concat(e)}):"".concat(t,"=").concat(n)})).join(",");var e}),I=function(){return 0!==Object.keys(P).length?P:(Object(v.onIabConsentNotification)(function(t){var e=t[1]&&t[2]&&t[3]&&t[4]&&t[5];e!==i&&(P=function(t){var e,n,i,r,v=o.a.get("page"),h={pa:t?"t":"f"},y=p.a.adFree?{af:"t"}:{},w=Object.assign({sens:v.isSensitive?"t":"f",permutive:Object(l.b)(),pv:o.a.get("ophan.pageViewId"),bp:function(){switch(Object(u.d)(!0)){case"mobile":case"mobileMedium":case"mobileLandscape":return"mobile";case"phablet":case"tablet":return"tablet";case"desktop":case"leftCol":case"wide":return"desktop";default:return"mobile"}}(),at:Object(c.d)("adtest")||void 0,si:Object(g.l)()?"t":"f",gdncrm:Object(m.a)(t),ab:function(){var t=Object(b.c)(),e=[],n=function(t,n){if("string"==typeof n&&"notintest"!==n){var i="".concat(t,"-").concat(n);e.push(i.substring(0,40))}};Object.keys(t).forEach(function(e){var i=t[e];n(e,i.variant)});var i=o.a.get("tests");return i&&Object.entries(i).forEach(function(t){var e=a()(t,2),i=e[0],r=e[1];n(i,r)}),e}(),ref:([{id:"facebook",match:"facebook.com"},{id:"twitter",match:"t.co/"},{id:"reddit",match:"reddit.com"},{id:"google",match:"www.google"}].filter(function(t){return Object(u.e)().indexOf(t.match)>-1})[0]||{}).id,ms:(i=v.source,i?(r=i,r.replace(/[+\s]+/g,"-").toLowerCase()).replace(/&/g,"and").replace(/'/g,""):null),fr:(n=s.a.get("gu.alreadyVisited")||0,n<=5?n.toString():n>=6&&n<=9?"6-9":n>=10&&n<=15?"10-15":n>=16&&n<=19?"16-19":n>=20&&n<=29?"20-29":n>=30?"30plus":n.toString()),vl:v.videoDuration?(30*Math.ceil(v.videoDuration/30)).toString():void 0,cc:Object(d.g)(),s:v.section,rp:o.a.get("isDotcomRendering",!1)?"dotcom-rendering":"dotcom-platform",dcre:o.a.get("isDotcomRendering",!1)||o.a.get("page.dcrCouldRender",!1)?"t":"f",inskin:(e=Object(u.g)(),e&&e.width>=1560?"t":"f")},v.sharedAdTargeting,h,y,T()(Object(f.d)(),["0p19G"])),O=E()(w,function(t){return Array.isArray(t)?t.length>0:t});return v.appNexusPageTargeting=C(O),v.pageAdTargeting=O,O}(e),i=e)}),P)}},219:function(t,e,n){"use strict";n.d(e,"a",function(){return P}),n.d(e,"b",function(){return S});var i=n(8),r=(n(5),n(9)),a=n(10),o=n(235),c=n(131),u=n(54),d=n(11),s=n(0),f=n(12),l=n(40),g=n.n(l),m=n(214),v=n(19),p={},b=[];document.addEventListener("focusout",function(){b.forEach(function(t){i.a.read(function(){if(document.activeElement===t)return Object(d.a)(".vjs-big-play-button",t.parentElement)}).then(function(t){i.a.write(function(){t&&t.addClass("youtube-play-btn-focussed")})})})}),document.addEventListener("focusin",function(){i.a.read(function(){return Object(d.a)(".vjs-big-play-button")}).then(function(t){i.a.write(function(){t&&t.removeClass("youtube-play-btn-focussed")})})});var h=function(t){p[t]&&p[t].progressTracker&&clearInterval(p[t].progressTracker)},y=function(t,e){var n=e.atomId,i=e.iframe,r=e.overlay,a=e.endSlate,o=e.paused;h(t),function(t){p[t].progressTracker=setInterval(function(t){var e=p[t];if(e){var n=e.pendingTrackingCalls,i=e.youtubePlayer,r=e.duration,a=e.atomId;if(n.length){var o=i.getCurrentTime();if(r){var u=Math.round(o/r*100);n.length&&u>=n[0]&&(Object(c.b)(n[0].toString(),a),n.shift())}}}}.bind(null,t),1e3),p[t].progressTracker}(t),e.playing=!0,o?e.paused=!1:Object(c.b)("play",n);var u=i.closest(".immersive-main-media");if(u&&u.classList.add("atom-playing"),r&&a&&!a.rendered){var d=r.parentElement;d&&a.fetch(d,"html")}},w=function(t){var e=t.split("?");return 1===e.length?"":Object(v.d)(e[1]).v||""},O={ENDED:function(t){var e=p[t];e.playing=!1,h(t),Object(c.b)("end",e.atomId),e.pendingTrackingCalls=[25,50,75];var n=e.iframe&&e.iframe.closest(".immersive-main-media")||null;n&&n.classList.remove("atom-playing")},PLAYING:function(t){var e=p[t];if(e){var n=p[t],i=n.youtubePlayer,o=n.youtubeId,u=w(i.getVideoUrl());u!==o?Object(r.a)("/atom/youtube/".concat(u,".json")).then(function(n){var r=n.atomId;r&&(e.atomId=r,e.youtubeId=u,e.duration=i.getDuration(),Object(c.a)(r),y(t,e))}).catch(function(t){Object(a.a)(Error("Failed to get atom ID for youtube ID ".concat(u,". ").concat(t)),{feature:"youtube"},!1)}):y(t,e)}},PAUSED:function(t){var e=p[t];e.playing=!1,e.paused=!0,h(t)}},j=function(t){return{isAutoplayBlockingPlatform:Object(f.p)()||Object(f.l)(),isInternalReferrer:s.a.get("page.isDev")?0===document.referrer.indexOf(window.location.origin):0===document.referrer.indexOf(s.a.get("page.host")),isMainVideo:t&&!!t.closest('figure[data-component="main video"]')||!1,flashingElementsAllowed:Object(m.a)("flashing-elements"),isVideoArticle:"video"===s.a.get("page.contentType","").toLowerCase(),isFront:s.a.get("page.isFront",!1),isUSContent:"us"===s.a.get("page.productionOffice","").toLowerCase(),isPaidContent:s.a.get("page.isPaidContent")}},A=function(){var t=document.querySelector(".immersive-main-media__media .youtube-media-atom"),e=t?t.offsetHeight:0,n=document.querySelector(".immersive-main-media__headline-container"),i=e-(n?n.offsetHeight:0),r=document.querySelector(".youtube-media-atom__immersive-interface");r&&(r.style.top="".concat(i,"px"))},T=function(t,e,n,i,r){var a=document.getElementById(n);if(a){b.push(a);var o=r.target,c=w(o.getVideoUrl()),d=o.getDuration();p[e]={iframe:a,atomId:t,youtubeId:c,duration:d,youtubePlayer:o,paused:!1,playing:!1,pendingTrackingCalls:[25,50,75]};var l=function(t){var e=t.isAutoplayBlockingPlatform,n=t.isInternalReferrer,i=t.isMainVideo,r=t.flashingElementsAllowed,a=t.isVideoArticle,o=t.isFront,c=t.isUSContent,u=t.isPaidContent,d=c&&u&&(a&&i||o)&&r;return d?{autoplay:d,mutedOnStart:d&&Object(f.l)()}:{autoplay:(a&&n&&i||o)&&!e&&r,mutedOnStart:!1}}(j(a));if(l.mutedOnStart&&function(t){var e=new URL(t.src);e.searchParams.set("mute","1"),t.setAttribute("src",e.toString())}(a),l.autoplay&&r.target.playVideo(),i&&(p[e].overlay=i,s.a.get("page.section")&&Object(f.m)({min:"desktop"}))){var m=function(t){var e=t.parentNode;if(e instanceof HTMLElement){var n=(e.dataset||{}).endSlate;if(n){var i=new u.a;return i.endpoint=n,i}}}(i);m&&(p[e].endSlate=m)}a.closest(".immersive-main-media__media")&&(A(),window.addEventListener("resize",g()(A.bind(null),200)))}},k=function(t){i.a.read(function(){if(t){var e=t.querySelector(".youtube-media-atom__iframe");if(e){var n=e.id,i=t.getAttribute("data-media-atom-id")||"",r="".concat(i,"/").concat(Math.random().toString(36).substr(2,9));t.setAttribute("data-unique-atom-id",r);var a=t.querySelector(".youtube-media-atom__overlay"),u=t.getAttribute("data-channel-id")||"";Object(c.a)(i),Object(o.a)(e,{onPlayerReady:function(t){T(i,r,n,a,t)},onPlayerStateChange:function(t){!function(t,e){var n=e.data,i=Object.keys(O).find(function(t){return n===window.YT.PlayerState[t]});i&&(O[i](t),function(t){if(t){var e=new Event("videoPlaying");document.dispatchEvent(e)}else{var n=new Event("videoEnded");document.dispatchEvent(n)}}(Object.keys(p).map(function(t){return p[t]}).filter(function(t){return t.playing}).length>0))}(r,t)}},e.dataset.assetId,u)}}})},E=function(t){t&&i.a.read(function(){Object(d.a)(".youtube-media-atom:not(.no-player)",t).each(function(t){var e=t.querySelector(".youtube-media-atom__overlay");s.a.get("page.isFront")?e.addEventListener("click",function(){k(t)}):k(t)})})},P=function(t){t&&t.length?t.forEach(E):E(document.body)},S=function(t){var e=p[t];e&&e.youtubePlayer.pauseVideo()}},235:function(t,e,n){"use strict";n.d(e,"a",function(){return y});var i,r=n(7),a=n.n(r),o=n(0),c=n(211),u=n(19),d=n(215),s=n(132),f=n(163),l=n(11),g=n(55),m=n(172),v=new Promise(function(t){window.YT&&window.YT.Player?t():window.onYouTubeIframeAPIReady=t}),p=function(t){t&&t.classList.add("youtube__video-started")};Object(f.onIabConsentNotification)(function(t){i=t[1]&&t[2]&&t[3]&&t[4]&&t[5]});var b=function(t,e){if(t)return{disableAds:!0};var n=Object(d.c)();return n.permutive=Object(m.a)(),{nonPersonalizedAd:!e,adTagParameters:{iu:o.a.get("page.adUnit"),cust_params:encodeURIComponent(Object(u.b)(n))}}},h=function(t){return document.getElementById("youtube-".concat(t))},y=function(t,e,n,r){return Object(c.a)("https://www.youtube.com/iframe_api",{}),v.then(function(){var r=o.a.get("googleAnalytics.trackers.editorial");return function(t,e,n,r,a,o,c,u){var d=b(s.a.adFree,!!i);return new window.YT.Player(t.id,{host:s.a.adFree||!t.classList.contains("youtube-media-atom__iframe")?"https://www.youtube-nocookie.com":"https://www.youtube.com",videoId:e,width:"100%",height:"100%",events:{onReady:r,onStateChange:a,onError:function(t){console.error("YOUTUBE: ".concat(t.data)),console.dir(t)},onAdStart:c,onAdEnd:u},embedConfig:{relatedChannels:[],disableRelatedVideos:!1,adsConfig:d}})}(t,n,0,function(t){var i=h(n);(function(t){return t.target.getCurrentTime()>0})(t)&&p(i),function(t,e,n){a.a.write(function(){if(n){n.classList.add("youtube__video-ready");var t=l.a.ancestor(n,"fc-item");t&&Object(l.a)(t)[0].classList.add("fc-item--has-video-main-media__ready")}}),e&&"function"==typeof e.onPlayerReady&&e.onPlayerReady(t)}(t,e,i)},function(t){!function(t,e,n){if(n&&o.a.get("page.isDev")){var i=window.YT.PlayerState,r=Object.keys(i).find(function(e){return i[e]===t.data});r&&console.log("Player ".concat(n.id," is ").concat(r))}a.a.write(function(){["ENDED","PLAYING","PAUSED","BUFFERING","CUED"].forEach(function(e){if(n){n.classList.toggle("youtube__video-".concat(e.toLocaleLowerCase()),t.data===window.YT.PlayerState[e]);var i=l.a.ancestor(n,"fc-item");i&&Object(l.a)(i)[0].classList.toggle("fc-item--has-video-main-media__".concat(e.toLocaleLowerCase()),t.data===window.YT.PlayerState[e]),p(n)}})}),e&&"function"==typeof e.onPlayerStateChange&&e.onPlayerStateChange(t)}(t,e,h(n))},0,function(){window.ga("".concat(r,".send"),"event",Object(g.b)("adStart",n))},function(){window.ga("".concat(r,".send"),"event",Object(g.b)("adEnd",n))})})}},55:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return c});var i=n(2),r=n.n(i),a=function(t,e,n,i,r,a){var o=i,c={eventCategory:"media",eventAction:r(t),eventLabel:n,dimension19:a,dimension20:o},u=e[t.eventType];return u&&(c[u]=1),c},o=function(t){var e="".concat(t.mediaType," ");return t.isPreroll?e+="preroll":e+="content",e},c=function(t,e){var n="adStart"===t?24:25;return r()({eventCategory:"media",eventAction:"video preroll",eventLabel:e,dimension19:e,dimension20:"gu-video-youtube"},"metric".concat(n),1)}}}]);
//# sourceMappingURL=graun.article~facia~trail~youtube.js.map